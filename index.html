<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
  <title>–§–ª–æ—Ä–∞ ‚Äî –ö–∞—Ç–∞–ª–æ–≥</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,500;1,400&family=Manrope:wght@300;400;500;600&display=swap" rel="stylesheet"/>
  <style>
    :root {
      --bg:      #0c0b0a;
      --surface: #1a1815;
      --card:    #201e1b;
      --border:  rgba(210,170,100,0.13);
      --gold:    #d2aa64;
      --gold2:   #f0cc8a;
      --cream:   #f0e4cf;
      --muted:   rgba(240,228,207,0.4);
      --wine:    #7b2d3f;
      --green:   #2d5040;
    }
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
    html{background:var(--bg);scroll-behavior:smooth;}
    body{
      font-family:'Manrope',sans-serif;
      background:var(--bg);color:var(--cream);
      min-height:100svh;overflow-x:hidden;
      -webkit-font-smoothing:antialiased;
      /* –æ—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É –ø–æ–¥ –Ω–∞–≤ */
      padding-bottom:70px;
    }
    /* –ö—Ä–∞—Å–∏–≤—ã–π —Ñ–æ–Ω-–≥—Ä–∞–¥–∏–µ–Ω—Ç */
    body::before{
      content:'';position:fixed;inset:0;pointer-events:none;
      background:
        radial-gradient(ellipse 70% 50% at 10% 0%,rgba(123,45,63,0.2) 0%,transparent 60%),
        radial-gradient(ellipse 60% 40% at 90% 100%,rgba(45,80,64,0.15) 0%,transparent 55%);
    }
    /* ‚îÄ‚îÄ‚îÄ –°–∫—Ä–æ–ª–ª–±–∞—Ä ‚îÄ‚îÄ‚îÄ */
    ::-webkit-scrollbar{width:2px;}
    ::-webkit-scrollbar-thumb{background:var(--gold);border-radius:9px;}

    /* ‚îÄ‚îÄ‚îÄ –®–∞–ø–∫–∞ ‚îÄ‚îÄ‚îÄ */
    .header{
      position:sticky;top:0;z-index:100;
      display:flex;align-items:center;justify-content:space-between;
      padding:13px 16px 11px;
      background:rgba(12,11,10,0.9);
      backdrop-filter:blur(18px);
      border-bottom:1px solid var(--border);
    }
    .logo{
      font-family:'Playfair Display',serif;
      font-size:19px;color:var(--gold);letter-spacing:0.05em;
    }
    .logo em{font-style:italic;color:var(--gold2);}
    .hdr-btns{display:flex;gap:8px;}
    .hdr-btn{
      position:relative;
      width:36px;height:36px;border-radius:50%;
      background:var(--card);border:1px solid var(--border);
      display:flex;align-items:center;justify-content:center;
      font-size:15px;cursor:pointer;
      transition:border-color .25s;
    }
    .hdr-btn:hover{border-color:var(--gold);}
    .hdr-badge{
      position:absolute;top:-3px;right:-3px;
      min-width:16px;height:16px;padding:0 4px;border-radius:99px;
      background:var(--gold);color:var(--bg);
      font-size:9px;font-weight:600;
      display:none;align-items:center;justify-content:center;
    }
    .hdr-badge.on{display:flex;animation:pop .35s cubic-bezier(.34,1.56,.64,1);}
    @keyframes pop{0%,100%{transform:scale(1)}50%{transform:scale(1.5)}}

    /* ‚îÄ‚îÄ‚îÄ –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è ‚îÄ‚îÄ‚îÄ */
    .bottom-nav{
      position:fixed;bottom:0;left:0;right:0;z-index:100;
      display:flex;
      background:rgba(12,11,10,0.93);
      backdrop-filter:blur(18px);
      border-top:1px solid var(--border);
      padding-bottom:env(safe-area-inset-bottom);
    }
    .bnav-item{
      flex:1;padding:9px 0 10px;
      display:flex;flex-direction:column;align-items:center;gap:3px;
      cursor:pointer;
    }
    .bnav-icon{font-size:19px;}
    .bnav-label{font-size:9px;font-weight:400;color:var(--muted);transition:color .2s;letter-spacing:.03em;}
    .bnav-item.active .bnav-label{color:var(--gold);}
    .bnav-item.active .bnav-icon{filter:drop-shadow(0 0 5px rgba(210,170,100,.5));}

    /* ‚îÄ‚îÄ‚îÄ –°—Ç—Ä–∞–Ω–∏—Ü—ã ‚îÄ‚îÄ‚îÄ */
    .page{display:none;}
    .page.on{display:block;animation:fadeUp .35s cubic-bezier(.16,1,.3,1);}
    @keyframes fadeUp{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}

    /* ‚îÄ‚îÄ‚îÄ Hero ‚îÄ‚îÄ‚îÄ */
    .hero{
      text-align:center;padding:44px 20px 32px;position:relative;
    }
    .hero-tag{
      font-size:9px;font-weight:400;letter-spacing:.5em;text-transform:uppercase;
      color:var(--gold);margin-bottom:12px;
    }
    .hero-title{
      font-family:'Playfair Display',serif;
      font-size:clamp(34px,9vw,48px);font-weight:500;line-height:1.05;
      color:var(--cream);
    }
    .hero-title em{font-style:italic;color:var(--gold2);}
    .hero-sub{font-size:12px;font-weight:300;color:var(--muted);margin-top:8px;line-height:1.7;}

    /* ‚îÄ‚îÄ‚îÄ –ü–æ–∏—Å–∫ ‚îÄ‚îÄ‚îÄ */
    .search-wrap{padding:0 14px 10px;position:relative;}
    .search-ico{position:absolute;left:26px;top:50%;transform:translateY(-50%);font-size:13px;pointer-events:none;}
    .search{
      width:100%;padding:10px 14px 10px 36px;
      background:var(--card);border:1px solid var(--border);
      border-radius:99px;color:var(--cream);
      font-family:'Manrope',sans-serif;font-size:12px;outline:none;
      transition:border-color .25s;
    }
    .search::placeholder{color:var(--muted);}
    .search:focus{border-color:rgba(210,170,100,.4);}

    /* ‚îÄ‚îÄ‚îÄ –§–∏–ª—å—Ç—Ä—ã ‚îÄ‚îÄ‚îÄ */
    .filters{display:flex;gap:7px;padding:0 14px 14px;overflow-x:auto;scrollbar-width:none;}
    .filters::-webkit-scrollbar{display:none;}
    .fil{
      padding:6px 14px;border-radius:99px;
      border:1px solid var(--border);background:transparent;
      color:var(--muted);font-family:'Manrope',sans-serif;
      font-size:11px;cursor:pointer;white-space:nowrap;
      transition:all .2s;
    }
    .fil.on,.fil:hover{border-color:var(--gold);color:var(--gold);background:rgba(210,170,100,.08);}

    /* ‚îÄ‚îÄ‚îÄ –°–µ—Ç–∫–∞ ‚îÄ‚îÄ‚îÄ */
    .grid{
      display:grid;grid-template-columns:repeat(2,1fr);
      gap:10px;padding:0 12px 12px;
    }
    .grid .card:first-child:not(.hidden){grid-column:1/-1;}

    /* ‚îÄ‚îÄ‚îÄ –ö–∞—Ä—Ç–æ—á–∫–∞ ‚îÄ‚îÄ‚îÄ */
    .card{
      background:var(--card);border:1px solid var(--border);
      border-radius:14px;overflow:hidden;
      opacity:0;transform:translateY(16px);
      transition:opacity .4s,transform .4s,border-color .25s;
    }
    .card.vis{opacity:1;transform:translateY(0);}
    .card:hover{border-color:rgba(210,170,100,.28);}
    .card.hidden{display:none;}

    /* –ö–∞—Ä—Ç–∏–Ω–∫–∞ */
    .card-pic{
      position:relative;aspect-ratio:1/1;
      display:flex;align-items:center;justify-content:center;
      font-size:62px;overflow:hidden;
      transition:transform .5s cubic-bezier(.16,1,.3,1);
    }
    .card:first-child:not(.hidden) .card-pic{aspect-ratio:16/8;font-size:90px;}
    .card:hover .card-pic{transform:scale(1.05);}
    .card-pic::after{
      content:'';position:absolute;inset:0;
      background:linear-gradient(to bottom,transparent 40%,rgba(12,11,10,.7) 100%);
    }
    .bg1{background:linear-gradient(145deg,#1e0c12,#2e1520);}
    .bg2{background:linear-gradient(145deg,#0e1510,#1c2818);}
    .bg3{background:linear-gradient(145deg,#1a1208,#2a1e0c);}
    .bg4{background:linear-gradient(145deg,#101010,#1e1c14);}
    .bg5{background:linear-gradient(145deg,#0c1018,#14182a);}
    .bg6{background:linear-gradient(145deg,#180e14,#261420);}

    .card-badge{
      position:absolute;top:9px;left:9px;z-index:2;
      font-size:8px;font-weight:500;letter-spacing:.28em;text-transform:uppercase;
      background:rgba(12,11,10,.72);backdrop-filter:blur(6px);
      border:1px solid rgba(210,170,100,.28);color:var(--gold);
      padding:3px 8px;border-radius:4px;
    }
    .card-wish{
      position:absolute;top:9px;right:9px;z-index:2;
      width:28px;height:28px;border-radius:50%;
      background:rgba(12,11,10,.6);backdrop-filter:blur(6px);
      display:flex;align-items:center;justify-content:center;
      font-size:13px;cursor:pointer;
      border:1px solid rgba(255,255,255,.08);
      transition:all .25s;
    }
    .card-wish.on{background:rgba(123,45,63,.45);border-color:var(--wine);}

    /* –¢–µ–ª–æ –∫–∞—Ä—Ç–æ—á–∫–∏ */
    .card-body{padding:12px 13px 14px;}
    .card:first-child:not(.hidden) .card-body{
      display:grid;grid-template-columns:1fr auto;align-items:end;gap:10px;
      padding:15px 16px 17px;
    }
    .card-name{
      font-family:'Playfair Display',serif;
      font-size:clamp(15px,4vw,17px);font-weight:500;
      color:var(--cream);line-height:1.15;margin-bottom:4px;
    }
    .card:first-child:not(.hidden) .card-name{font-size:clamp(18px,5vw,22px);}
    .card-desc{font-size:10.5px;font-weight:300;color:var(--muted);line-height:1.6;margin-bottom:10px;}
    .card:first-child:not(.hidden) .card-desc{margin-bottom:0;}
    .card-row{display:flex;align-items:center;justify-content:space-between;gap:8px;}
    .card-price{
      font-family:'Playfair Display',serif;
      font-size:clamp(16px,4.5vw,19px);font-weight:500;color:var(--gold);
    }
    .card-oldprice{font-size:10px;color:var(--muted);text-decoration:line-through;margin-top:1px;}

    /* –ö–Ω–æ–ø–∫–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É */
    .btn-add{
      display:flex;align-items:center;gap:5px;
      padding:8px 13px;border-radius:8px;
      border:1px solid var(--gold);background:transparent;
      color:var(--gold);font-family:'Manrope',sans-serif;
      font-size:10px;font-weight:500;letter-spacing:.1em;text-transform:uppercase;
      cursor:pointer;white-space:nowrap;
      transition:all .25s;position:relative;overflow:hidden;
    }
    .btn-add::before{
      content:'';position:absolute;inset:0;
      background:linear-gradient(105deg,transparent 30%,rgba(210,170,100,.18) 50%,transparent 70%);
      transform:translateX(-120%);transition:transform .5s;
    }
    .btn-add:hover::before{transform:translateX(120%);}
    .btn-add:hover{background:rgba(210,170,100,.1);box-shadow:0 0 14px rgba(210,170,100,.15);}
    .btn-add:active{transform:scale(.95);}
    .btn-add.in{background:rgba(210,170,100,.15);color:var(--gold2);}
    .card:first-child:not(.hidden) .btn-add{padding:10px 18px;}

    /* ‚ïê‚ïê‚ïê –ö–û–†–ó–ò–ù–ê ‚ïê‚ïê‚ïê */
    .cart-page{padding:18px 14px 20px;}
    .page-h{
      font-family:'Playfair Display',serif;
      font-size:24px;font-weight:500;color:var(--cream);margin-bottom:4px;
    }
    .page-h em{font-style:italic;color:var(--gold2);}
    .page-sub{font-size:11px;font-weight:300;color:var(--muted);margin-bottom:18px;}

    .empty{text-align:center;padding:50px 20px;}
    .empty-ico{font-size:48px;opacity:.45;margin-bottom:12px;}
    .empty-t{font-family:'Playfair Display',serif;font-size:18px;color:var(--cream);margin-bottom:6px;}
    .empty-s{font-size:12px;font-weight:300;color:var(--muted);line-height:1.6;}

    /* –¢–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω–µ */
    .ci-list{display:flex;flex-direction:column;gap:8px;margin-bottom:14px;}
    .ci{
      display:grid;grid-template-columns:52px 1fr auto;gap:12px;align-items:center;
      background:var(--card);border:1px solid var(--border);border-radius:12px;
      padding:11px 12px;animation:fadeUp .3s;
    }
    .ci-img{
      width:52px;height:52px;border-radius:9px;
      display:flex;align-items:center;justify-content:center;font-size:24px;
    }
    .ci-name{font-family:'Playfair Display',serif;font-size:14px;font-weight:500;color:var(--cream);margin-bottom:3px;}
    .ci-price{font-size:11px;color:var(--gold);}
    .ci-ctrl{display:flex;align-items:center;gap:6px;}
    .qbtn{
      width:26px;height:26px;border-radius:50%;
      background:var(--surface);border:1px solid var(--border);
      color:var(--cream);font-size:14px;cursor:pointer;
      display:flex;align-items:center;justify-content:center;
      transition:border-color .2s;
    }
    .qbtn:hover{border-color:var(--gold);color:var(--gold);}
    .qval{font-size:14px;font-weight:500;min-width:18px;text-align:center;}
    .delbtn{
      width:26px;height:26px;border-radius:50%;
      background:transparent;border:1px solid rgba(255,90,90,.12);
      color:rgba(255,90,90,.35);font-size:13px;cursor:pointer;
      display:flex;align-items:center;justify-content:center;
      transition:all .2s;
    }
    .delbtn:hover{border-color:rgba(255,90,90,.4);color:rgba(255,90,90,.7);background:rgba(255,90,90,.06);}

    /* –ü—Ä–æ–º–æ–∫–æ–¥ */
    .promo-row{display:flex;gap:7px;margin-bottom:14px;}
    .promo-inp{
      flex:1;padding:10px 13px;
      background:var(--surface);border:1px solid var(--border);
      border-radius:9px;color:var(--cream);
      font-family:'Manrope',sans-serif;font-size:12px;outline:none;
      transition:border-color .25s;
    }
    .promo-inp::placeholder{color:var(--muted);}
    .promo-inp:focus{border-color:var(--gold);}
    .promo-btn{
      padding:10px 14px;border-radius:9px;
      border:1px solid var(--gold);background:transparent;
      color:var(--gold);font-family:'Manrope',sans-serif;
      font-size:11px;font-weight:500;cursor:pointer;white-space:nowrap;
      transition:background .2s;
    }
    .promo-btn:hover{background:rgba(210,170,100,.1);}
    .promo-ok{color:#7bc47b;font-size:10px;margin-bottom:10px;}
    .promo-err{color:#e07070;font-size:10px;margin-bottom:10px;}

    /* –î–æ—Å—Ç–∞–≤–∫–∞ */
    .sec-title{
      font-size:9px;font-weight:500;letter-spacing:.4em;
      text-transform:uppercase;color:var(--gold);margin-bottom:10px;
    }
    .delivery-row{display:flex;gap:8px;margin-bottom:14px;}
    .del-opt{
      flex:1;padding:10px 8px;text-align:center;
      border:1px solid var(--border);border-radius:10px;cursor:pointer;
      transition:all .2s;
    }
    .del-opt.on{border-color:var(--gold);background:rgba(210,170,100,.07);}
    .del-ico{font-size:18px;margin-bottom:3px;}
    .del-name{font-size:11px;font-weight:400;color:var(--cream);}
    .del-price{font-size:9px;color:var(--muted);}

    /* –§–æ—Ä–º–∞ */
    .form-label{font-size:10px;font-weight:400;letter-spacing:.12em;text-transform:uppercase;color:var(--muted);margin-bottom:5px;}
    .form-inp{
      width:100%;padding:10px 13px;
      background:var(--surface);border:1px solid var(--border);
      border-radius:9px;color:var(--cream);
      font-family:'Manrope',sans-serif;font-size:13px;outline:none;
      margin-bottom:9px;transition:border-color .25s;
    }
    .form-inp::placeholder{color:var(--muted);}
    .form-inp:focus{border-color:rgba(210,170,100,.5);}
    textarea.form-inp{resize:vertical;min-height:66px;}

    /* –ò—Ç–æ–≥ */
    .summary-box{
      background:var(--card);border:1px solid var(--border);
      border-radius:12px;padding:15px 16px;margin-bottom:10px;
    }
    .sum-row{display:flex;justify-content:space-between;font-size:12px;font-weight:300;color:var(--muted);padding:5px 0;}
    .sum-row.total{
      border-top:1px solid var(--border);margin-top:7px;padding-top:12px;
      font-size:15px;font-weight:500;color:var(--cream);
    }
    .sum-row.total span:last-child{font-family:'Playfair Display',serif;color:var(--gold);font-size:19px;}

    /* –ö–Ω–æ–ø–∫–∞ –æ—Ñ–æ—Ä–º–∏—Ç—å */
    .btn-order{
      width:100%;padding:15px;border:none;border-radius:12px;
      background:linear-gradient(135deg,var(--wine) 0%,#a83d52 100%);
      color:var(--cream);font-family:'Manrope',sans-serif;
      font-size:11px;font-weight:600;letter-spacing:.2em;text-transform:uppercase;
      cursor:pointer;position:relative;overflow:hidden;
      box-shadow:0 4px 20px rgba(123,45,63,.35);
      transition:box-shadow .3s,transform .15s;
    }
    .btn-order::before{
      content:'';position:absolute;inset:0;
      background:linear-gradient(105deg,transparent 30%,rgba(255,255,255,.1) 50%,transparent 70%);
      transform:translateX(-120%);transition:transform .55s;
    }
    .btn-order:hover::before{transform:translateX(120%);}
    .btn-order:hover{box-shadow:0 6px 26px rgba(123,45,63,.5);}
    .btn-order:active{transform:scale(.98);}
    .hint{text-align:center;font-size:10px;color:var(--muted);margin-top:8px;}

    /* ‚ïê‚ïê‚ïê –ò–ó–ë–†–ê–ù–ù–û–ï ‚ïê‚ïê‚ïê */
    .wish-page{padding:18px 12px 20px;}
    .wish-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:9px;}

    /* ‚ïê‚ïê‚ïê –û –ù–ê–° ‚ïê‚ïê‚ïê */
    .info-page{padding:18px 14px 20px;}
    .info-card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:16px;margin-bottom:9px;}
    .info-card-title{font-family:'Playfair Display',serif;font-size:14px;font-weight:500;color:var(--cream);margin-bottom:10px;}
    .info-row{display:flex;justify-content:space-between;padding:7px 0;border-bottom:1px solid var(--border);font-size:12px;font-weight:300;}
    .info-row:last-child{border:none;}
    .info-row span:first-child{color:var(--muted);}

    /* ‚ïê‚ïê‚ïê –û–í–ï–†–õ–ï–ô –£–°–ü–ï–•–ê ‚ïê‚ïê‚ïê */
    .overlay{
      position:fixed;inset:0;z-index:500;
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      text-align:center;padding:36px;
      background:rgba(12,11,10,.97);backdrop-filter:blur(22px);
      opacity:0;pointer-events:none;transition:opacity .4s;
    }
    .overlay.on{opacity:1;pointer-events:all;}
    .ov-ring{
      width:84px;height:84px;border-radius:50%;
      border:1px solid var(--gold);
      display:flex;align-items:center;justify-content:center;
      font-size:32px;margin-bottom:24px;
      animation:none;position:relative;
    }
    .overlay.on .ov-ring{animation:ring .65s cubic-bezier(.16,1,.3,1) forwards;}
    @keyframes ring{0%{transform:scale(.4);opacity:0}60%{transform:scale(1.07)}100%{transform:scale(1);opacity:1}}
    .ov-ring::before{content:'';position:absolute;inset:-9px;border-radius:50%;border:1px solid rgba(210,170,100,.15);}
    .ov-title{font-family:'Playfair Display',serif;font-size:28px;font-weight:500;color:var(--cream);margin-bottom:8px;}
    .ov-title em{font-style:italic;color:var(--gold2);}
    .ov-detail{font-family:'Playfair Display',serif;font-size:14px;color:var(--gold);margin:16px 0;}
    .ov-desc{font-size:12px;font-weight:300;color:var(--muted);line-height:1.9;max-width:250px;}
    .ov-id{margin-top:18px;padding:7px 18px;border:1px solid rgba(210,170,100,.18);border-radius:99px;font-size:10px;color:var(--muted);letter-spacing:.18em;}

    /* ‚ïê‚ïê‚ïê –¢–û–°–¢ ‚ïê‚ïê‚ïê */
    .toast{
      position:fixed;bottom:78px;left:50%;
      transform:translateX(-50%) translateY(50px);
      background:var(--card);border:1px solid var(--border);
      color:var(--cream);padding:10px 20px;border-radius:99px;
      font-size:12px;font-weight:300;white-space:nowrap;
      pointer-events:none;z-index:400;
      transition:transform .35s cubic-bezier(.16,1,.3,1),opacity .35s;opacity:0;
    }
    .toast.on{transform:translateX(-50%) translateY(0);opacity:1;}

    /* –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å */
    .divider{display:flex;align-items:center;gap:10px;padding:14px 0 10px;}
    .divider-line{flex:1;height:1px;background:var(--border);}
    .divider-txt{font-size:8px;letter-spacing:.45em;text-transform:uppercase;color:var(--gold);white-space:nowrap;}
  </style>
</head>
<body>

<!-- –®–∞–ø–∫–∞ -->
<header class="header">
  <div class="logo">–§–ª–æ—Ä–∞ <em>–ë—É—Ç–∏–∫</em></div>
  <div class="hdr-btns">
    <div class="hdr-btn" onclick="go('wishlist')" title="–ò–∑–±—Ä–∞–Ω–Ω–æ–µ">
      ü§ç<span class="hdr-badge" id="wBadge">0</span>
    </div>
    <div class="hdr-btn" onclick="go('cart')" title="–ö–æ—Ä–∑–∏–Ω–∞">
      üõí<span class="hdr-badge" id="cBadge">0</span>
    </div>
  </div>
</header>

<!-- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
<nav class="bottom-nav">
  <div class="bnav-item active" data-p="catalog" onclick="go('catalog')">
    <span class="bnav-icon">üå∏</span><span class="bnav-label">–ö–∞—Ç–∞–ª–æ–≥</span>
  </div>
  <div class="bnav-item" data-p="cart" onclick="go('cart')">
    <span class="bnav-icon">üõí</span><span class="bnav-label">–ö–æ—Ä–∑–∏–Ω–∞</span>
  </div>
  <div class="bnav-item" data-p="wishlist" onclick="go('wishlist')">
    <span class="bnav-icon">ü§ç</span><span class="bnav-label">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
  </div>
  <div class="bnav-item" data-p="info" onclick="go('info')">
    <span class="bnav-icon">‚ÑπÔ∏è</span><span class="bnav-label">–û –Ω–∞—Å</span>
  </div>
</nav>

<!-- ‚ïê‚ïê‚ïê –ö–ê–¢–ê–õ–û–ì ‚ïê‚ïê‚ïê -->
<div class="page on" id="pg-catalog">
  <div class="hero">
    <div class="hero-tag">–í–µ—Å–µ–Ω–Ω—è—è –∫–æ–ª–ª–µ–∫—Ü–∏—è 2025</div>
    <h1 class="hero-title">–ò—Å–∫—É—Å—Å—Ç–≤–æ<br><em>–∂–∏–≤—ã—Ö —Ü–≤–µ—Ç–æ–≤</em></h1>
    <p class="hero-sub">–ê–≤—Ç–æ—Ä—Å–∫–∏–µ –±—É–∫–µ—Ç—ã —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π –ø–æ –ú–æ—Å–∫–≤–µ</p>
  </div>
  <div class="search-wrap">
    <span class="search-ico">üîç</span>
    <input class="search" id="srch" placeholder="–ù–∞–π—Ç–∏ –±—É–∫–µ—Ç..." oninput="renderCatalog()"/>
  </div>
  <div class="filters" id="filters">
    <button class="fil on" data-c="all"    onclick="setFil('all',this)">–í—Å–µ</button>
    <button class="fil"    data-c="roses"  onclick="setFil('roses',this)">–†–æ–∑—ã</button>
    <button class="fil"    data-c="mix"    onclick="setFil('mix',this)">–ú–∏–∫—Å—ã</button>
    <button class="fil"    data-c="exotic" onclick="setFil('exotic',this)">–≠–∫–∑–æ—Ç–∏–∫–∞</button>
    <button class="fil"    data-c="mini"   onclick="setFil('mini',this)">–ú–∏–Ω–∏</button>
  </div>
  <div class="grid" id="grid"></div>
</div>

<!-- ‚ïê‚ïê‚ïê –ö–û–†–ó–ò–ù–ê ‚ïê‚ïê‚ïê -->
<div class="page" id="pg-cart">
  <div class="cart-page">
    <h2 class="page-h">–ú–æ—è <em>–∫–æ—Ä–∑–∏–Ω–∞</em></h2>
    <p class="page-sub" id="cSub">0 –ø–æ–∑–∏—Ü–∏–π</p>
    <div id="cartBody"></div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê –ò–ó–ë–†–ê–ù–ù–û–ï ‚ïê‚ïê‚ïê -->
<div class="page" id="pg-wishlist">
  <div class="wish-page">
    <h2 class="page-h">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</h2>
    <p class="page-sub" id="wSub">0 –±—É–∫–µ—Ç–æ–≤</p>
    <div class="wish-grid" id="wishGrid"></div>
    <div id="wishEmpty"></div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê –û –ù–ê–° ‚ïê‚ïê‚ïê -->
<div class="page" id="pg-info">
  <div class="info-page">
    <h2 class="page-h">–û –±—É—Ç–∏–∫–µ</h2>
    <p class="page-sub" style="margin-bottom:18px">–° –ª—é–±–æ–≤—å—é –∫ –∫–∞–∂–¥–æ–º—É –ª–µ–ø–µ—Å—Ç–∫—É</p>
    <div class="info-card">
      <div class="info-card-title">üïê –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã</div>
      <div class="info-row"><span>–ü–Ω ‚Äî –ü—Ç</span><span>9:00 ‚Äî 21:00</span></div>
      <div class="info-row"><span>–°–± ‚Äî –í—Å</span><span>10:00 ‚Äî 20:00</span></div>
    </div>
    <div class="info-card">
      <div class="info-card-title">üöö –î–æ—Å—Ç–∞–≤–∫–∞</div>
      <div class="info-row"><span>–ü–æ –ú–æ—Å–∫–≤–µ</span><span>–æ—Ç 350 ‚ÇΩ</span></div>
      <div class="info-row"><span>–≠–∫—Å–ø—Ä–µ—Å—Å (2 —á)</span><span>–æ—Ç 650 ‚ÇΩ</span></div>
      <div class="info-row"><span>–û—Ç 5 000 ‚ÇΩ</span><span>–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</span></div>
    </div>
    <div class="info-card">
      <div class="info-card-title">üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã</div>
      <div class="info-row"><span>–¢–µ–ª–µ—Ñ–æ–Ω</span><span>+7 (495) 000-00-00</span></div>
      <div class="info-row"><span>–ú–µ–Ω–µ–¥–∂–µ—Ä</span><span>@flora_manager</span></div>
    </div>
    <div class="info-card">
      <div class="info-card-title">üèÜ –ú—ã –≤ —Ü–∏—Ñ—Ä–∞—Ö</div>
      <div class="info-row"><span>–û–ø—ã—Ç</span><span>10 –ª–µ—Ç</span></div>
      <div class="info-row"><span>–ó–∞–∫–∞–∑–æ–≤</span><span>50 000+</span></div>
      <div class="info-row"><span>–†–µ–π—Ç–∏–Ω–≥</span><span>‚≠ê 4.97</span></div>
    </div>
  </div>
</div>

<!-- –û–≤–µ—Ä–ª–µ–π —É—Å–ø–µ—Ö–∞ -->
<div class="overlay" id="overlay">
  <div class="ov-ring">‚ú¶</div>
  <h2 class="ov-title">–ó–∞–∫–∞–∑<br><em>–æ—Ñ–æ—Ä–º–ª–µ–Ω!</em></h2>
  <div class="ov-detail" id="ovDetail"></div>
  <p class="ov-desc">–§–ª–æ—Ä–∏—Å—Ç –ø–æ–∑–≤–æ–Ω–∏—Ç –≤–∞–º<br>–¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π.<br>–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –≤—ã–±—Ä–∞–ª–∏ –Ω–∞—Å üå∏</p>
  <div class="ov-id" id="ovId"></div>
</div>

<!-- –¢–æ—Å—Ç -->
<div class="toast" id="toast"></div>

<script>
// ‚îÄ‚îÄ Telegram ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const tg = window.Telegram?.WebApp;
if (tg) { tg.ready(); tg.expand(); }

// ‚îÄ‚îÄ –¢–æ–≤–∞—Ä—ã ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const ITEMS = [
  {id:1,e:'üåπ',bg:'bg1',badge:'–•–∏—Ç',   cat:'roses', name:'–ö—Ä–∞—Å–Ω—ã–µ —Ä–æ–∑—ã',    desc:'–≠–∫–≤–∞–¥–æ—Ä—Å–∫–∏–µ Grand Prix. –°–∏–º–≤–æ–ª —Å—Ç—Ä–∞—Å—Ç–∏.',   price:7900, old:null},
  {id:2,e:'üå∏',bg:'bg2',badge:'–ù–æ–≤–∏–Ω–∫–∞',cat:'mix',  name:'–ë—É–∫–µ—Ç –†–∞—Å—Å–≤–µ—Ç',   desc:'–ü–∏–æ–Ω—ã —Å —ç–≤–∫–∞–ª–∏–ø—Ç–æ–º. –†–æ–º–∞–Ω—Ç–∏–∫–∞ —É—Ç—Ä–∞.',       price:6400, old:7900},
  {id:3,e:'üåª',bg:'bg3',badge:'–•–∏—Ç',   cat:'mix',   name:'–°–æ–ª–Ω–µ—á–Ω—ã–π –¥–µ–Ω—å',  desc:'–ü–æ–¥—Å–æ–ª–Ω—É—Ö–∏ —Å —Ö—Ä–∏–∑–∞–Ω—Ç–µ–º–∞–º–∏. –¢–µ–ø–ª–æ –∏ —Å–≤–µ—Ç.',  price:4900, old:null},
  {id:4,e:'üå∑',bg:'bg4',badge:'–ö–ª–∞—Å—Å–∏–∫',cat:'roses', name:'–¢—é–ª—å–ø–∞–Ω—ã Royal',  desc:'–ù–∏–¥–µ—Ä–ª–∞–Ω–¥—Å–∫–∏–µ Parrot Mix. –í–µ—Å–µ–Ω–Ω—è—è –Ω–µ–∂–Ω–æ—Å—Ç—å.',price:3900,old:4500},
  {id:5,e:'üíê',bg:'bg5',badge:'–≠–∫—Å–∫–ª—é–∑–∏–≤',cat:'exotic',name:'–ê–≤—Ç–æ—Ä—Å–∫–∏–π —Å—é—Ä–ø—Ä–∏–∑',desc:'–°–µ–∑–æ–Ω–Ω–∞—è –∫–æ–º–ø–æ–∑–∏—Ü–∏—è —Ñ–ª–æ—Ä–∏—Å—Ç–∞. –®–µ–¥–µ–≤—Ä.',  price:12900,old:null},
  {id:6,e:'ü™ª',bg:'bg6',badge:'–õ–∏–º–∏—Ç',  cat:'exotic',name:'–õ–∞–≤–∞–Ω–¥–∞ & –ò—Ä–∏—Å',  desc:'–ü—Ä–æ–≤–∞–Ω—Å –∏ –°—Ä–µ–¥–∏–∑–µ–º–Ω–æ–º–æ—Ä—å–µ –≤ –æ–¥–Ω–æ–º –±—É–∫–µ—Ç–µ.',price:6400, old:null},
  {id:7,e:'üåº',bg:'bg3',badge:'–ú–∏–Ω–∏',   cat:'mini',  name:'–†–æ–º–∞—à–∫–∏ Mini',    desc:'–õ—ë–≥–∫–∏–π –±—É–∫–µ—Ç–∏–∫ –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.',            price:1990, old:null},
  {id:8,e:'üå∫',bg:'bg1',badge:'–ù–æ–≤–∏–Ω–∫–∞',cat:'exotic',name:'–ì–∏–±–∏—Å–∫—É—Å –¢—Ä–æ–ø–∏–∫', desc:'–¢—Ä–æ–ø–∏—á–µ—Å–∫–∏–µ —Ü–≤–µ—Ç—ã —Å –∞–Ω—Ç—É—Ä–∏—É–º–æ–º.',           price:8900, old:null},
];

// ‚îÄ‚îÄ –°–æ—Å—Ç–æ—è–Ω–∏–µ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let cart = {};     // { id: qty }
let wish = new Set();
let fil = 'all';
let delivery = 'courier';
let discount = 0;
const PROMOS = {'–§–õ–û–†–ê10':10,'SPRING15':15,'TGBOT20':20};

// ‚îÄ‚îÄ –£—Ç–∏–ª–∏—Ç—ã ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const fmt = n => n.toLocaleString('ru-RU') + ' ‚ÇΩ';
const uid = () => '–§–õ-' + Math.random().toString(36).slice(2,7).toUpperCase();
const pl  = (n,a,b,c) => n%10===1&&n%100!==11?a:[2,3,4].includes(n%10)&&![12,13,14].includes(n%100)?b:c;

function toast(msg) {
  const el = document.getElementById('toast');
  el.textContent = msg; el.classList.add('on');
  clearTimeout(el._t); el._t = setTimeout(()=>el.classList.remove('on'),2600);
}

function badges() {
  const qty = Object.values(cart).reduce((s,q)=>s+q,0);
  ['cBadge'].forEach(id=>{
    const el=document.getElementById(id);
    el.textContent=qty; el.classList.toggle('on',qty>0);
  });
  const wb = document.getElementById('wBadge');
  wb.textContent = wish.size; wb.classList.toggle('on', wish.size>0);
}

// ‚îÄ‚îÄ –ù–∞–≤–∏–≥–∞—Ü–∏—è ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function go(page) {
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('on'));
  document.querySelectorAll('.bnav-item').forEach(n=>n.classList.remove('active'));
  document.getElementById('pg-'+page).classList.add('on');
  document.querySelector(`[data-p="${page}"]`)?.classList.add('active');
  window.scrollTo(0,0);
  if (page==='cart') renderCart();
  if (page==='wishlist') renderWish();
}

// ‚îÄ‚îÄ –ö–∞—Ç–∞–ª–æ–≥ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function setFil(cat, btn) {
  fil = cat;
  document.querySelectorAll('.fil').forEach(b=>b.classList.remove('on'));
  btn.classList.add('on');
  renderCatalog();
}

function renderCatalog() {
  const q = document.getElementById('srch').value.toLowerCase();
  const visible = ITEMS.filter(p=>{
    const catOk = fil==='all' || p.cat===fil;
    const qOk   = !q || p.name.toLowerCase().includes(q) || p.desc.toLowerCase().includes(q);
    return catOk && qOk;
  });
  const grid = document.getElementById('grid');
  grid.innerHTML = '';
  if (!visible.length) {
    grid.innerHTML='<div class="empty" style="grid-column:1/-1"><div class="empty-ico">üîç</div><div class="empty-t">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div><div class="empty-s">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –∑–∞–ø—Ä–æ—Å</div></div>';
    return;
  }
  visible.forEach((p,i)=>{
    const inC = !!cart[p.id];
    const inW = wish.has(p.id);
    const card = document.createElement('div');
    card.className = 'card';
    card.style.transitionDelay = (i*45)+'ms';
    card.innerHTML = `
      <div class="card-pic ${p.bg}">
        ${p.e}
        <span class="card-badge">${p.badge}</span>
        <div class="card-wish ${inW?'on':''}" onclick="toggleWish(${p.id},event)">${inW?'‚ù§Ô∏è':'ü§ç'}</div>
      </div>
      <div class="card-body">
        <div>
          <div class="card-name">${p.name}</div>
          <div class="card-desc">${p.desc}</div>
        </div>
        <div class="card-row">
          <div>
            <div class="card-price">${fmt(p.price)}</div>
            ${p.old?`<div class="card-oldprice">${fmt(p.old)}</div>`:''}
          </div>
          <button class="btn-add ${inC?'in':''}" onclick="addCart(${p.id},event)">
            ${inC?'‚úì –í –∫–æ—Ä–∑–∏–Ω–µ':'+ –í –∫–æ—Ä–∑–∏–Ω—É'}
          </button>
        </div>
      </div>`;
    grid.appendChild(card);
    setTimeout(()=>card.classList.add('vis'),30);
  });
}

// ‚îÄ‚îÄ –ö–æ—Ä–∑–∏–Ω–∞ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function addCart(id, e) {
  if (e) e.stopPropagation();
  const p = ITEMS.find(x=>x.id===id);
  cart[id] = (cart[id]||0)+1;
  badges(); renderCatalog();
  toast('üå∏ ¬´'+p.name+'¬ª –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É');
}

function chQty(id, d) {
  cart[id] = (cart[id]||0)+d;
  if (cart[id]<=0) delete cart[id];
  badges(); renderCart(); renderCatalog();
}

function delCart(id) {
  delete cart[id];
  badges(); renderCart(); renderCatalog();
  toast('–£–¥–∞–ª–µ–Ω–æ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã');
}

function cartTotal() {
  const sub = Object.entries(cart).reduce((s,[id,q])=>{
    const p=ITEMS.find(x=>x.id==id); return s+(p?p.price*q:0);
  },0);
  const disc = Math.round(sub*discount/100);
  const dlv  = delivery==='pickup'?0:(sub>=5000?0:350);
  return {sub, disc, dlv, total:sub-disc+dlv};
}

function renderCart() {
  const ids = Object.keys(cart);
  const sub  = document.getElementById('cSub');
  const body = document.getElementById('cartBody');
  const qty  = ids.reduce((s,id)=>s+cart[id],0);
  sub.textContent = qty+' '+pl(qty,'–ø–æ–∑–∏—Ü–∏—è','–ø–æ–∑–∏—Ü–∏–∏','–ø–æ–∑–∏—Ü–∏–π');

  if (!ids.length) {
    body.innerHTML='<div class="empty"><div class="empty-ico">üõí</div><div class="empty-t">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div><div class="empty-s">–î–æ–±–∞–≤—å—Ç–µ –±—É–∫–µ—Ç—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞</div></div>';
    return;
  }

  const {sub:s,disc,dlv,total} = cartTotal();

  const itemsHtml = '<div class="ci-list">'+ids.map(id=>{
    const p=ITEMS.find(x=>x.id==id); if(!p) return '';
    const q=cart[id];
    return `<div class="ci">
      <div class="ci-img ${p.bg}">${p.e}</div>
      <div>
        <div class="ci-name">${p.name}</div>
        <div class="ci-price">${fmt(p.price)} √ó ${q} = ${fmt(p.price*q)}</div>
      </div>
      <div style="display:flex;flex-direction:column;align-items:center;gap:5px">
        <div class="ci-ctrl">
          <button class="qbtn" onclick="chQty(${p.id},-1)">‚àí</button>
          <span class="qval">${q}</span>
          <button class="qbtn" onclick="chQty(${p.id},1)">+</button>
        </div>
        <button class="delbtn" onclick="delCart(${p.id})">üóë</button>
      </div>
    </div>`;
  }).join('')+'</div>';

  body.innerHTML = itemsHtml + `
    <div class="divider"><div class="divider-line"></div><span class="divider-txt">–ü—Ä–æ–º–æ–∫–æ–¥</span><div class="divider-line"></div></div>
    <div class="promo-row">
      <input class="promo-inp" id="promoInp" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥" maxlength="20"/>
      <button class="promo-btn" onclick="applyPromo()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
    </div>
    <div id="promoMsg"></div>

    <div class="sec-title">–°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è</div>
    <div class="delivery-row">
      <div class="del-opt ${delivery==='courier'?'on':''}" onclick="setDel('courier')">
        <div class="del-ico">üöö</div>
        <div class="del-name">–ö—É—Ä—å–µ—Ä</div>
        <div class="del-price">${s>=5000?'–ë–µ—Å–ø–ª–∞—Ç–Ω–æ':'–æ—Ç 350 ‚ÇΩ'}</div>
      </div>
      <div class="del-opt ${delivery==='pickup'?'on':''}" onclick="setDel('pickup')">
        <div class="del-ico">üè†</div>
        <div class="del-name">–°–∞–º–æ–≤—ã–≤–æ–∑</div>
        <div class="del-price">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</div>
      </div>
    </div>

    <div class="divider"><div class="divider-line"></div><span class="divider-txt">–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ</span><div class="divider-line"></div></div>
    <div class="form-label">–ò–º—è</div>
    <input class="form-inp" id="fName" placeholder="–í–∞—à–µ –∏–º—è" value="${tg?.initDataUnsafe?.user?.first_name||''}"/>
    <div class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω</div>
    <input class="form-inp" id="fPhone" placeholder="+7 (___) ___-__-__" type="tel"/>
    ${delivery==='courier'?`
    <div class="form-label">–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</div>
    <input class="form-inp" id="fAddr" placeholder="–£–ª–∏—Ü–∞, –¥–æ–º, –∫–≤–∞—Ä—Ç–∏—Ä–∞"/>
    <div class="form-label">–£–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è</div>
    <input class="form-inp" id="fTime" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 25 –º–∞—è, 14‚Äì16"/>
    `:''}
    <div class="form-label">–ü–æ–∂–µ–ª–∞–Ω–∏—è</div>
    <textarea class="form-inp" id="fNote" placeholder="–û—Ç–∫—Ä—ã—Ç–∫–∞, –æ—Å–æ–±—ã–π –ø–æ–≤–æ–¥..."></textarea>

    <div class="summary-box">
      <div class="sum-row"><span>–°—É–º–º–∞</span><span>${fmt(s)}</span></div>
      ${disc?`<div class="sum-row"><span>–°–∫–∏–¥–∫–∞ (${discount}%)</span><span style="color:#7bc47b">‚àí${fmt(disc)}</span></div>`:''}
      <div class="sum-row"><span>–î–æ—Å—Ç–∞–≤–∫–∞</span><span>${dlv===0?'–ë–µ—Å–ø–ª–∞—Ç–Ω–æ':fmt(dlv)}</span></div>
      <div class="sum-row total"><span>–ò—Ç–æ–≥–æ</span><span>${fmt(total)}</span></div>
    </div>
    <button class="btn-order" onclick="placeOrder()">‚ú¶ –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
    ${s<5000?`<p class="hint">–î–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏: ${fmt(5000-s)}</p>`:''}
  `;
}

function setDel(t) { delivery=t; renderCart(); }

function applyPromo() {
  const code = document.getElementById('promoInp').value.trim().toUpperCase();
  const msg  = document.getElementById('promoMsg');
  if (PROMOS[code]) {
    discount = PROMOS[code];
    msg.className='promo-ok'; msg.textContent='‚úì –°–∫–∏–¥–∫–∞ '+discount+'% –ø—Ä–∏–º–µ–Ω–µ–Ω–∞!';
    renderCart(); toast('üéâ –°–∫–∏–¥–∫–∞ '+discount+'%!');
  } else {
    msg.className='promo-err'; msg.textContent='‚úó –ü—Ä–æ–º–æ–∫–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω';
  }
}

function placeOrder() {
  const name  = document.getElementById('fName')?.value.trim();
  const phone = document.getElementById('fPhone')?.value.trim();
  if (!name)  { toast('‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ –∏–º—è'); return; }
  if (!phone) { toast('‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω'); return; }

  const {sub,disc,dlv,total} = cartTotal();
  const oid = uid();
  const items = Object.entries(cart).map(([id,qty])=>{
    const p=ITEMS.find(x=>x.id==id);
    return {id:p.id,emoji:p.e,name:p.name,price:p.price,qty};
  });

  const payload = JSON.stringify({
    order_id: oid,
    type: 'order',
    client: {
      name, phone,
      addr: document.getElementById('fAddr')?.value.trim()||'',
      date: document.getElementById('fTime')?.value.trim()||'',
      note: document.getElementById('fNote')?.value.trim()||'',
    },
    items, subtotal:sub,
    discount, discount_amt:disc,
    delivery_type:delivery, delivery_price:dlv, total,
    promo: discount ? document.getElementById('promoInp')?.value.trim().toUpperCase() : null,
  });

  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–≤–µ—Ä–ª–µ–π
  document.getElementById('ovDetail').textContent =
    items.length+' '+pl(items.length,'–±—É–∫–µ—Ç','–±—É–∫–µ—Ç–∞','–±—É–∫–µ—Ç–æ–≤')+' ‚Äî '+fmt(total);
  document.getElementById('ovId').textContent = '‚Ññ '+oid;
  document.getElementById('overlay').classList.add('on');

  // –°–±—Ä–æ—Å –∫–æ—Ä–∑–∏–Ω—ã
  cart = {}; discount = 0; badges();

  // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –±–æ—Ç—É
  setTimeout(()=>{
    if (tg?.sendData) tg.sendData(payload);
    else console.log('DEV:', payload);
  }, 1600);
}

// ‚îÄ‚îÄ –ò–∑–±—Ä–∞–Ω–Ω–æ–µ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function toggleWish(id, e) {
  if (e) e.stopPropagation();
  const p = ITEMS.find(x=>x.id===id);
  if (wish.has(id)) { wish.delete(id); toast('–£–¥–∞–ª–µ–Ω–æ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ'); }
  else              { wish.add(id);    toast('‚ù§Ô∏è –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ'); }
  badges(); renderCatalog();
  if (document.getElementById('pg-wishlist').classList.contains('on')) renderWish();
}

function renderWish() {
  const grid = document.getElementById('wishGrid');
  const empty= document.getElementById('wishEmpty');
  document.getElementById('wSub').textContent = wish.size+' '+pl(wish.size,'–±—É–∫–µ—Ç','–±—É–∫–µ—Ç–∞','–±—É–∫–µ—Ç–æ–≤');
  if (!wish.size) {
    grid.innerHTML=''; empty.innerHTML='<div class="empty"><div class="empty-ico">ü§ç</div><div class="empty-t">–°–ø–∏—Å–æ–∫ –ø—É—Å—Ç</div><div class="empty-s">–ù–∞–∂–º–∏—Ç–µ ü§ç –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ,<br>—á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –±—É–∫–µ—Ç</div></div>';
    return;
  }
  empty.innerHTML='';
  grid.innerHTML='';
  [...wish].forEach((id,i)=>{
    const p=ITEMS.find(x=>x.id===id); if(!p) return;
    const inC=!!cart[p.id];
    const card=document.createElement('div');
    card.className='card';
    card.style.transitionDelay=(i*55)+'ms';
    card.innerHTML=`
      <div class="card-pic ${p.bg}">
        ${p.e}
        <span class="card-badge">${p.badge}</span>
        <div class="card-wish on" onclick="toggleWish(${p.id},event)">‚ù§Ô∏è</div>
      </div>
      <div class="card-body">
        <div class="card-name">${p.name}</div>
        <div class="card-desc">${p.desc}</div>
        <div class="card-row">
          <div class="card-price">${fmt(p.price)}</div>
          <button class="btn-add ${inC?'in':''}" onclick="addCart(${p.id},event)">${inC?'‚úì':'+'}</button>
        </div>
      </div>`;
    grid.appendChild(card);
    setTimeout(()=>card.classList.add('vis'),30);
  });
}

// ‚îÄ‚îÄ –ó–∞–ø—É—Å–∫ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
renderCatalog();
badges();
</script>
</body>
</html>
